<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Experiencia CinematogrÃ¡fica</title>
    <style>
        :root {
            --depth: 2000px;
            --pink-glow: rgba(255, 105, 180, 0.6);
            --accent: #ff69b4;
        }

        body, html {
            margin: 0; padding: 0;
            width: 100%; height: 100%;
            background-color: #020205;
            overflow: hidden;
            font-family: 'Georgia', serif;
            color: white;
        }

        /* REPRODUCTOR */
        #music-control {
            position: fixed; bottom: 30px; left: 30px;
            width: 50px; height: 50px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%; color: white;
            cursor: pointer; z-index: 200;
            display: flex; justify-content: center; align-items: center;
            backdrop-filter: blur(10px); transition: all 0.3s ease;
        }
        .sound-wave { width: 20px; height: 20px; display: flex; justify-content: space-between; align-items: flex-end; }
        .sound-wave span { width: 3px; background: white; height: 5px; animation: wave 1s ease-in-out infinite; }
        @keyframes wave { 0%, 100% { height: 5px; } 50% { height: 15px; } }

        /* ESCENARIO */
        #viewport {
            width: 100vw; height: 100vh;
            perspective: var(--depth);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
        }

        #world {
            transform-style: preserve-3d;
            width: 100%; height: 100%;
            position: relative;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
        }

        /* FOTOS */
        .photo-particle {
            position: absolute; width: 120px; height: 120px;
            background-size: cover; background-position: center;
            border-radius: 8px; box-shadow: 0 0 20px var(--pink-glow);
            transition: opacity 0.8s ease; will-change: transform, opacity;
        }

        /* TEXTO PRINCIPAL */
        #name-container { display: flex; transform-style: preserve-3d; z-index: 10; }
        .letter {
            font-size: clamp(3rem, 12vw, 8rem); font-weight: bold;
            background: linear-gradient(45deg, #fff, var(--accent), #fff, #ff1493, #fff);
            background-size: 400% 400%; -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            animation: gradientMove 8s ease infinite; opacity: 0;
            transition: all 1.8s cubic-bezier(0.19, 1, 0.22, 1);
            transform: translateZ(-1200px) scale(0.5); margin: 0 8px;
        }

        /* MENSAJE FINAL */
        #final-message {
            margin-top: 20px; font-style: italic; font-size: clamp(1rem, 4vw, 1.5rem);
            color: rgba(255,255,255,0.7); opacity: 0;
            transform: translateY(20px); transition: all 2s ease;
            letter-spacing: 2px; text-shadow: 0 0 10px rgba(255,255,255,0.3);
        }

        @keyframes gradientMove { 0%, 100% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } }

        /* EFECTOS */
        .shake-active { animation: camera-shake 0.1s infinite; }
        @keyframes camera-shake { 0% { transform: translate(2px, 1px); } 50% { transform: translate(-2px, -1px); } 100% { transform: translate(1px, 1px); } }
        .flash-effect { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; opacity: 0; pointer-events: none; z-index: 100; }
        @keyframes flash-anim { 0% { opacity: 0.9; } 100% { opacity: 0; } }

        .shooting-star { position: absolute; width: 2px; height: 2px; background: white; border-radius: 50%; box-shadow: 0 0 10px 2px white, 0 0 20px 4px var(--pink-glow); opacity: 0; pointer-events: none; }
        @keyframes shoot { 0% { transform: translate3d(var(--startX), var(--startY), var(--startZ)) scale(0.1); opacity: 0; } 15% { opacity: 1; } 100% { transform: translate3d(var(--endX), var(--endY), var(--endZ)) scale(1.2); opacity: 0; } }

        #instructions { position: fixed; bottom: 30px; width: 100%; text-align: center; color: rgba(255,255,255,0.3); font-size: 0.7rem; text-transform: uppercase; letter-spacing: 3px; }
    </style>
</head>
<body>

    <button id="music-control"><div id="icon">ðŸŽµ</div></button>
    <audio id="bg-music" loop><source src="Hecha_pa_mi-Boza.mp3" type="audio/mpeg"></audio>

    <div id="viewport">
        <div id="world">
            <div id="name-container"></div>
            <div id="final-message"></div>
        </div>
    </div>

    <div id="instructions">Desliza para viajar</div>

    <script>
        // --- 1. CONFIGURACIÃ“N ---
        const CONFIG = {
            nombre: "ANDREA",
            frase: "Eres mi amor infinito",
            fotos: ['fotos/1.jpeg', 'fotos/2.jpeg', 'fotos/3.jpeg', 'fotos/4.jpeg', 'fotos/5.jpeg', 'fotos/6.jpeg', 'fotos/7.jpeg', 'fotos/8.jpeg'],
            distanciaMeta: 5500
        };

        const world = document.getElementById('world');
        const nameContainer = document.getElementById('name-container');
        const finalMsg = document.getElementById('final-message');
        let scrollY = 0, hasShaken = false, starsInterval = null;

        // --- 2. INICIALIZACIÃ“N ---
        const flash = document.createElement('div');
        flash.className = 'flash-effect';
        document.body.appendChild(flash);

        CONFIG.nombre.toUpperCase().split('').forEach(char => {
            const span = document.createElement('span');
            span.className = 'letter';
            span.innerText = char;
            nameContainer.appendChild(span);
        });
        finalMsg.innerText = CONFIG.frase;

        const particles = [];
        for(let i=0; i < 45; i++) {
            const p = document.createElement('div');
            p.className = 'photo-particle';
            p.style.backgroundImage = `url(${CONFIG.fotos[i % CONFIG.fotos.length]})`;
            const x = (Math.random() - 0.5) * window.innerWidth * 2.5;
            const y = (Math.random() - 0.5) * window.innerHeight * 2.5;
            const z = -Math.random() * 6000; 
            particles.push({ x, y, z, element: p });
            world.appendChild(p);
        }

        // --- 3. LÃ“GICA DE EFECTOS ---
        function createShootingStar() {
            const star = document.createElement('div');
            star.className = 'shooting-star';
            document.body.appendChild(star);
            const startX = (Math.random() - 0.5) * window.innerWidth;
            const startY = -window.innerHeight/2;
            const startZ = -Math.random() * 1000;
            star.style.setProperty('--startX', `${startX}px`);
            star.style.setProperty('--startY', `${startY}px`);
            star.style.setProperty('--startZ', `${startZ}px`);
            star.style.setProperty('--endX', `${startX + (Math.random()*400-200)}px`);
            star.style.setProperty('--endY', `${window.innerHeight}px`);
            star.style.setProperty('--endZ', `${startZ + 500}px`);
            star.style.animation = `shoot ${1.5 + Math.random()*2}s linear forwards`;
            star.addEventListener('animationend', () => star.remove());
        }

        function triggerImpact() {
            world.classList.add('shake-active');
            flash.style.animation = 'none';
            flash.offsetHeight; 
            flash.style.animation = 'flash-anim 1s ease-out forwards';
            setTimeout(() => world.classList.remove('shake-active'), 600);
            if (!starsInterval) starsInterval = setInterval(createShootingStar, 400);
            
            // Mostrar mensaje final
            setTimeout(() => {
                finalMsg.style.opacity = "1";
                finalMsg.style.transform = "translateY(0)";
            }, 1000);
        }

        // --- 4. MOTOR PRINCIPAL ---
        function update() {
            particles.forEach(p => {
                const currentZ = p.z + scrollY;
                let opacity = 1;
                if (currentZ > -100) opacity = Math.max(0, 1 - (currentZ + 100) / 500);
                if (currentZ < -5000) opacity = 0;
                p.element.style.opacity = opacity;
                p.element.style.transform = `translate3d(${p.x}px, ${p.y}px, ${currentZ}px) rotate(${currentZ/25}deg)`;
            });

            if(scrollY > CONFIG.distanciaMeta) {
                if(!hasShaken) { triggerImpact(); hasShaken = true; }
                document.querySelectorAll('.letter').forEach((l, i) => {
                    l.style.opacity = "1";
                    l.style.transform = "translateZ(0px) scale(1)";
                    l.style.transitionDelay = ${i * 0.1}s;
                });
            } else {
                if(hasShaken) { clearInterval(starsInterval); starsInterval = null; hasShaken = false; }
                document.querySelectorAll('.letter').forEach(l => {
                    l.style.opacity = "0";
                    l.style.transform = "translateZ(-1200px) scale(0.5)";
                    l.style.transitionDelay = "0s";
                });
                finalMsg.style.opacity = "0";
                finalMsg.style.transform = "translateY(20px)";
            }
            requestAnimationFrame(update);
        }

        // Controles
        window.addEventListener('wheel', (e) => { scrollY += e.deltaY * 1.5; if(scrollY < 0) scrollY = 0; });
        let touchY = 0;
        window.addEventListener('touchstart', e => touchY = e.touches[0].clientY);
        window.addEventListener('touchmove', e => {
            scrollY += (touchY - e.touches[0].clientY) * 3;
            touchY = e.touches[0].clientY;
            if(scrollY < 0) scrollY = 0;
        });

        // MÃºsica
        const musicBtn = document.getElementById('music-control');
        const music = document.getElementById('bg-music');
        const icon = document.getElementById('icon');
        let isPlaying = false;
        musicBtn.onclick = () => {
            if (!isPlaying) {
                music.play();
                musicBtn.classList.add('playing');
                icon.innerHTML = <div class="sound-wave"><span></span><span style="animation-delay:0.2s"></span><span style="animation-delay:0.4s"></span></div>;
            } else {
                music.pause();
                musicBtn.classList.remove('playing');
                icon.innerHTML = 'ðŸŽµ';
            }
            isPlaying = !isPlaying;
        };

        update();
    </script>
</body>
</html>